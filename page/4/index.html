<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>我带你们打</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="我带你们打">
<meta property="og:url" content="https://github.com/ZzqiZQute/page/4/index.html">
<meta property="og:site_name" content="我带你们打">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我带你们打">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <link href="https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <script src="https://cdn.bootcss.com/nprogress/0.2.0/nprogress.min.js"></script>
  <script>
    NProgress.start()
  </script>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
   <canvas id="logo3d-canvas" touch-action="none">
  </canvas>
  
  <div id="header-outer" class="outer">
  
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">我带你们打</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">a.k.a. WDNMD</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
      </nav>
      <nav id="sub-nav">
        <!--  -->
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/ZzqiZQute" title="Github"></a>
        
        <!-- <a id="nav-search-btn" class="nav-icon" title="搜索"></a> -->
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/ZzqiZQute"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Babylon-js-8-光照" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/13/Babylon-js-8-光照/" class="article-date">
  <time datetime="2019-06-13T07:24:55.000Z" itemprop="datePublished">2019-06-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/06/13/Babylon-js-8-光照/">Babylon.js-8 光照</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <script src="https://cdn.bootcss.com/babylonjs/4.1.0-alpha.1/babylon.js"></script>
<script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.min.js"></script> <!-- babylon.js加载器 (OBJ, STL, glTF)-->
<script src="https://code.jquery.com/pep/0.4.3/pep.js"></script> <!-- Pointer Event Polyfill 便携设备触碰事件处理 -->
<script src="https://preview.babylonjs.com/gui/babylon.gui.min.js"></script>

<p>参考链接：<a href="https://doc.babylonjs.com/babylon101/lights" target="_blank" rel="noopener">https://doc.babylonjs.com/babylon101/lights</a></p>
<p>光照影响3d场景中mesh的渲染效果。在BabylonJS中，光照的默认允许数量是<code>4</code>，但是可以增加。</p>
<p>光源主要分为以下几个部分：</p>
<ul>
<li><a href="#PointLight">点光源 （PointLight）</a></li>
<li><a href="#DirectionalLight">直射光源 （DirectionalLight）</a></li>
<li><a href="#SpotLight">聚光灯光源 （SpotLight）</a></li>
<li><a href="#HemisphericLight">半球光源 （HemisphericLight）</a></li>
</ul>
<div id="PointLight">

<h2 id="点光源"><a href="#点光源" class="headerlink" title="点光源"></a>点光源</h2><p>我们使用以下代码创建点光源</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> light = <span class="keyword">new</span> BABYLON.PointLight(name,position,scene)</span><br></pre></td></tr></table></figure>

<p>其中<code>position</code>是点光源的位置。下面使用以下代码演示点光源，使光源处于一个球的正上方，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">var</span> createScenePointLight = <span class="function"><span class="keyword">function</span> (<span class="params">engine,canvas</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// This creates a basic Babylon Scene object (non-mesh)</span></span><br><span class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> BABYLON.Scene(engine);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This creates and positions an ArcRotateCamera;</span></span><br><span class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> BABYLON.ArcRotateCamera(<span class="string">"camera"</span>, -<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="number">20</span>,<span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), scene);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> material =<span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"material"</span>,scene)</span><br><span class="line"></span><br><span class="line">    material.diffuseColor=<span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This targets the camera to scene origin</span></span><br><span class="line">    camera.setTarget(BABYLON.Vector3.Zero());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This attaches the camera to the canvas</span></span><br><span class="line">    camera.attachControl(canvas, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**************************************************************/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> light = <span class="keyword">new</span> BABYLON.PointLight(<span class="string">"light"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>), scene);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create a sphere which diameter is 8</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sphere = BABYLON.MeshBuilder.CreateSphere(<span class="string">"sphere"</span>,&#123;<span class="attr">diameter</span>:<span class="number">8</span>&#125;,scene)</span><br><span class="line"></span><br><span class="line">    sphere.material=material</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> scene;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> canvasPointLight = <span class="built_in">document</span>.getElementById(<span class="string">'renderCanvas-8-pointlight'</span>)</span><br><span class="line"><span class="keyword">const</span> enginePointLight = <span class="keyword">new</span> BABYLON.Engine(canvasPointLight,<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">const</span> scenePointLight = createScenePointLight(enginePointLight,canvasPointLight) </span><br><span class="line">enginePointLight.runRenderLoop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;scenePointLight.render()&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<div style="display:flex;flex-direction:column;align-items:center;margin-top:20px;margin-bottom:20px">
    <canvas id="renderCanvas-8-pointlight" touch-action="none" style="width:400px;height:400px">
    </canvas>
</div>

<script>
  var createScenePointLight = function (engine,canvas) {
            // This creates a basic Babylon Scene object (non-mesh)
        var scene = new BABYLON.Scene(engine);

        // This creates and positions an ArcRotateCamera;
        var camera = new BABYLON.ArcRotateCamera("camera", -Math.PI/2,Math.PI/2,20,new BABYLON.Vector3(0, 0, 0), scene);

        var material =new BABYLON.StandardMaterial("material",scene)

        material.diffuseColor=new BABYLON.Color3(0,1,0)


        // This targets the camera to scene origin
        camera.setTarget(BABYLON.Vector3.Zero());

        // This attaches the camera to the canvas
        camera.attachControl(canvas, false);


        /**************************************************************/

        var light = new BABYLON.PointLight("light", new BABYLON.Vector3(0, 10, 0), scene);

        // Create a sphere which diameter is 8

        var sphere = BABYLON.MeshBuilder.CreateSphere("sphere",{diameter:8},scene)

        sphere.material=material

        return scene;
  }
    const canvasPointLight = document.getElementById('renderCanvas-8-pointlight')
    const enginePointLight = new BABYLON.Engine(canvasPointLight,true)
    const scenePointLight = createScenePointLight(enginePointLight,canvasPointLight) 
    enginePointLight.runRenderLoop(function(){scenePointLight.render()})
</script>

<div id="DirectionalLight">

<h2 id="直射光源"><a href="#直射光源" class="headerlink" title="直射光源"></a>直射光源</h2><p>我们使用以下代码创建直射光源</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> light = <span class="keyword">new</span> BABYLON.DirectionalLight(name,direction,scene)</span><br></pre></td></tr></table></figure>

<p>其中<code>direction</code>是直射光源的方向。下面使用以下代码演示直射光源，使光源方向从上往下（方向：(0,-1,0)）打到一个球上，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">var</span> createSceneDirectionalLight = <span class="function"><span class="keyword">function</span> (<span class="params">engine,canvas</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// This creates a basic Babylon Scene object (non-mesh)</span></span><br><span class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> BABYLON.Scene(engine);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This creates and positions an ArcRotateCamera;</span></span><br><span class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> BABYLON.ArcRotateCamera(<span class="string">"camera"</span>, -<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="number">20</span>,<span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), scene);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> material =<span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"material"</span>,scene)</span><br><span class="line"></span><br><span class="line">    material.diffuseColor=<span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This targets the camera to scene origin</span></span><br><span class="line">    camera.setTarget(BABYLON.Vector3.Zero());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This attaches the camera to the canvas</span></span><br><span class="line">    camera.attachControl(canvas, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**************************************************************/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> light = <span class="keyword">new</span> BABYLON.DirectionalLight(<span class="string">"light"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">-1</span>, <span class="number">0</span>), scene);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create a sphere which diameter is 8</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sphere = BABYLON.MeshBuilder.CreateSphere(<span class="string">"sphere"</span>,&#123;<span class="attr">diameter</span>:<span class="number">8</span>&#125;,scene)</span><br><span class="line"></span><br><span class="line">    sphere.material=material</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> scene;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> canvasDirectionalLight = <span class="built_in">document</span>.getElementById(<span class="string">'renderCanvas-8-directionallight'</span>)</span><br><span class="line"><span class="keyword">const</span> engineDirectionalLight = <span class="keyword">new</span> BABYLON.Engine(canvasDirectionalLight,<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">const</span> sceneDirectionalLight = createSceneDirectionalLight(engineDirectionalLight,canvasDirectionalLight) </span><br><span class="line">engineDirectionalLight.runRenderLoop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;sceneDirectionalLight.render()&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<div style="display:flex;flex-direction:column;align-items:center;margin-top:20px;margin-bottom:20px">
    <canvas id="renderCanvas-8-directionallight" touch-action="none" style="width:400px;height:400px">
    </canvas>
</div>

<script>
  var createSceneDirectionalLight = function (engine,canvas) {
        // This creates a basic Babylon Scene object (non-mesh)
        var scene = new BABYLON.Scene(engine);

        // This creates and positions an ArcRotateCamera;
        var camera = new BABYLON.ArcRotateCamera("camera", -Math.PI/2,Math.PI/2,20,new BABYLON.Vector3(0, 0, 0), scene);

        var material =new BABYLON.StandardMaterial("material",scene)

        material.diffuseColor=new BABYLON.Color3(0,1,0)


        // This targets the camera to scene origin
        camera.setTarget(BABYLON.Vector3.Zero());

        // This attaches the camera to the canvas
        camera.attachControl(canvas, false);


        /**************************************************************/

        var light = new BABYLON.DirectionalLight("light", new BABYLON.Vector3(0, -1 , 0), scene);

        // Create a sphere which diameter is 8

        var sphere = BABYLON.MeshBuilder.CreateSphere("sphere",{diameter:8},scene)

        sphere.material=material

        return scene;
  }
    const canvasDirectionalLight = document.getElementById('renderCanvas-8-directionallight')
    const engineDirectionalLight = new BABYLON.Engine(canvasDirectionalLight,true)
    const sceneDirectionalLight = createSceneDirectionalLight(engineDirectionalLight,canvasDirectionalLight) 
    engineDirectionalLight.runRenderLoop(function(){sceneDirectionalLight.render()})
</script>

<div id="SpotLight">

<h2 id="聚光灯光源"><a href="#聚光灯光源" class="headerlink" title="聚光灯光源"></a>聚光灯光源</h2><p>我们使用以下代码创建聚光灯光源</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> light = <span class="keyword">new</span> BABYLON.SpotLight(name,position,direction,angle,exponent,scene)</span><br></pre></td></tr></table></figure>

<p>其中<code>position</code>指聚光灯光源的位置，<code>direction</code>是聚光灯光源的方向,<code>angle</code>指聚光灯的辐射角度<code>[0,π]</code>，指数<code>exponent</code>指聚光灯随距离光强的衰减程度。下面使用以下代码演示聚光灯光源，使光源在球的正上方，方向从上往下（方向：(0,-1,0)），角度为<code>π/2</code>，指数为<code>50</code>打到一个球上，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">var</span> createSceneSpotLight = <span class="function"><span class="keyword">function</span> (<span class="params">engine,canvas</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// This creates a basic Babylon Scene object (non-mesh)</span></span><br><span class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> BABYLON.Scene(engine);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This creates and positions an ArcRotateCamera;</span></span><br><span class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> BABYLON.ArcRotateCamera(<span class="string">"camera"</span>, -<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="number">20</span>,<span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), scene);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> material =<span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"material"</span>,scene)</span><br><span class="line"></span><br><span class="line">    material.diffuseColor=<span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This targets the camera to scene origin</span></span><br><span class="line">    camera.setTarget(BABYLON.Vector3.Zero());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This attaches the camera to the canvas</span></span><br><span class="line">    camera.attachControl(canvas, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**************************************************************/</span></span><br><span class="line">    <span class="keyword">var</span> light = <span class="keyword">new</span> BABYLON.SpotLight(<span class="string">"light"</span>, <span class="keyword">new</span> BABYLON.Vector3 (<span class="number">0</span>,<span class="number">10</span>,<span class="number">0</span>),<span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">-1</span> , <span class="number">0</span>),<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="number">50</span>,scene);</span><br><span class="line">    <span class="comment">// Create a sphere which diameter is 8</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sphere = BABYLON.MeshBuilder.CreateSphere(<span class="string">"sphere"</span>,&#123;<span class="attr">diameter</span>:<span class="number">8</span>&#125;,scene)</span><br><span class="line"></span><br><span class="line">    sphere.material=material</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> scene;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> canvasSpotLight = <span class="built_in">document</span>.getElementById(<span class="string">'renderCanvas-8-spotlight'</span>)</span><br><span class="line"><span class="keyword">const</span> engineSpotLight = <span class="keyword">new</span> BABYLON.Engine(canvasSpotLight,<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">const</span> sceneSpotLight = createSceneSpotLight(engineSpotLight,canvasSpotLight) </span><br><span class="line">engineSpotLight.runRenderLoop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;sceneSpotLight.render()&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<div style="display:flex;flex-direction:column;align-items:center;margin-top:20px;margin-bottom:20px">
    <canvas id="renderCanvas-8-spotlight" touch-action="none" style="width:400px;height:400px">
    </canvas>
</div>

<script>
  var createSceneSpotLight = function (engine,canvas) {
        // This creates a basic Babylon Scene object (non-mesh)
        var scene = new BABYLON.Scene(engine);

        // This creates and positions an ArcRotateCamera;
        var camera = new BABYLON.ArcRotateCamera("camera", -Math.PI/2,Math.PI/2,20,new BABYLON.Vector3(0, 0, 0), scene);

        var material =new BABYLON.StandardMaterial("material",scene)

        material.diffuseColor=new BABYLON.Color3(0,1,0)


        // This targets the camera to scene origin
        camera.setTarget(BABYLON.Vector3.Zero());

        // This attaches the camera to the canvas
        camera.attachControl(canvas, false);


        /**************************************************************/

        var light = new BABYLON.SpotLight("light", new BABYLON.Vector3 (0,10,0),new BABYLON.Vector3(0, -1 , 0),Math.PI/2,50,scene);

        // Create a sphere which diameter is 8

        var sphere = BABYLON.MeshBuilder.CreateSphere("sphere",{diameter:8},scene)

        sphere.material=material

        return scene;
  }
    const canvasSpotLight = document.getElementById('renderCanvas-8-spotlight')
    const engineSpotLight = new BABYLON.Engine(canvasSpotLight,true)
    const sceneSpotLight = createSceneSpotLight(engineSpotLight,canvasSpotLight) 
    engineSpotLight.runRenderLoop(function(){sceneSpotLight.render()})
</script>

<div id="HemisphericLight">

<h2 id="半球光源"><a href="#半球光源" class="headerlink" title="半球光源"></a>半球光源</h2><p>我们使用以下代码创建半球光源</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> light = <span class="keyword">new</span> BABYLON.PointLight(name,direction,scene)</span><br></pre></td></tr></table></figure>

<p>其中<code>direction</code>指半球光源的光反射方向，由于半球光源模拟环境光，所以<code>direction</code>指的是光反射方向，而不是入射方向。下面使用以下代码演示半球光源，使光源方向从上往下打到一个球上，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">var</span> createSceneHemisphericLight = <span class="function"><span class="keyword">function</span> (<span class="params">engine,canvas</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// This creates a basic Babylon Scene object (non-mesh)</span></span><br><span class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> BABYLON.Scene(engine);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This creates and positions an ArcRotateCamera;</span></span><br><span class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> BABYLON.ArcRotateCamera(<span class="string">"camera"</span>, -<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="number">20</span>,<span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), scene);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> material =<span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"material"</span>,scene)</span><br><span class="line"></span><br><span class="line">    material.diffuseColor=<span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This targets the camera to scene origin</span></span><br><span class="line">    camera.setTarget(BABYLON.Vector3.Zero());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This attaches the camera to the canvas</span></span><br><span class="line">    camera.attachControl(canvas, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**************************************************************/</span></span><br><span class="line">    <span class="keyword">var</span> light = <span class="keyword">new</span> BABYLON.HemisphericLight(<span class="string">"light"</span>,<span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>),scene);</span><br><span class="line">    <span class="comment">// Create a sphere which diameter is 8</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sphere = BABYLON.MeshBuilder.CreateSphere(<span class="string">"sphere"</span>,&#123;<span class="attr">diameter</span>:<span class="number">8</span>&#125;,scene)</span><br><span class="line"></span><br><span class="line">    sphere.material=material</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> scene;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> canvasHemisphericLight = <span class="built_in">document</span>.getElementById(<span class="string">'renderCanvas-8-hemisphericlight'</span>)</span><br><span class="line"><span class="keyword">const</span> engineHemisphericLight = <span class="keyword">new</span> BABYLON.Engine(canvasHemisphericLight,<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">const</span> sceneHemisphericLight = createSceneHemisphericLight(engineHemisphericLight,canvasHemisphericLight) </span><br><span class="line">engineHemisphericLight.runRenderLoop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;sceneHemisphericLight.render()&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<div style="display:flex;flex-direction:column;align-items:center;margin-top:20px;margin-bottom:20px">
    <canvas id="renderCanvas-8-hemisphericlight" touch-action="none" style="width:400px;height:400px">
    </canvas>
</div>

<script>
  var createSceneHemisphericLight = function (engine,canvas) {
        // This creates a basic Babylon Scene object (non-mesh)
        var scene = new BABYLON.Scene(engine);

        // This creates and positions an ArcRotateCamera;
        var camera = new BABYLON.ArcRotateCamera("camera", -Math.PI/2,Math.PI/2,20,new BABYLON.Vector3(0, 0, 0), scene);

        var material =new BABYLON.StandardMaterial("material",scene)

        material.diffuseColor=new BABYLON.Color3(0,1,0)


        // This targets the camera to scene origin
        camera.setTarget(BABYLON.Vector3.Zero());

        // This attaches the camera to the canvas
        camera.attachControl(canvas, false);


        /**************************************************************/

        var light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1 , 0),scene);

        // Create a sphere which diameter is 8

        var sphere = BABYLON.MeshBuilder.CreateSphere("sphere",{diameter:8},scene)

        sphere.material=material

        return scene;
  }
    const canvasHemisphericLight = document.getElementById('renderCanvas-8-hemisphericlight')
    const engineHemisphericLight = new BABYLON.Engine(canvasHemisphericLight,true)
    const sceneHemisphericLight = createSceneHemisphericLight(engineHemisphericLight,canvasHemisphericLight) 
    engineHemisphericLight.runRenderLoop(function(){sceneHemisphericLight.render()})
</script>

<p>上面已经提过，一个材质默认能够渲染4种光源，但我们可以修改材质的<code>maxSimultaneousLights</code>属性来使其支持更多的光源。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> material = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"mat"</span>, scene);</span><br><span class="line">material.maxSimultaneousLights = <span class="number">6</span>;</span><br></pre></td></tr></table></figure>

<p>我们看一个例子，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createSceneMaxSimulaneousLights = <span class="function"><span class="keyword">function</span> (<span class="params">engine,canvas</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> BABYLON.Scene(engine);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setup camera</span></span><br><span class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> BABYLON.ArcRotateCamera(<span class="string">"Camera"</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">10</span>, BABYLON.Vector3.Zero(), scene);</span><br><span class="line">    camera.setPosition(<span class="keyword">new</span> BABYLON.Vector3(<span class="number">-10</span>, <span class="number">10</span>, <span class="number">0</span>));</span><br><span class="line">    camera.attachControl(canvas, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Lights</span></span><br><span class="line">    <span class="keyword">var</span> light0 = <span class="keyword">new</span> BABYLON.PointLight(<span class="string">"Omni0"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">10</span>, <span class="number">0</span>), scene);</span><br><span class="line">    <span class="keyword">var</span> light1 = <span class="keyword">new</span> BABYLON.PointLight(<span class="string">"Omni1"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">-10</span>, <span class="number">0</span>), scene);</span><br><span class="line">    <span class="keyword">var</span> light2 = <span class="keyword">new</span> BABYLON.PointLight(<span class="string">"Omni2"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>), scene);</span><br><span class="line">    <span class="keyword">var</span> light3 = <span class="keyword">new</span> BABYLON.DirectionalLight(<span class="string">"Dir0"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>), scene);</span><br><span class="line">    <span class="keyword">var</span> light4 = <span class="keyword">new</span> BABYLON.PointLight(<span class="string">"Omni3"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>), scene);</span><br><span class="line">    <span class="keyword">var</span> light5 = <span class="keyword">new</span> BABYLON.PointLight(<span class="string">"Omni4"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">10</span>, <span class="number">0</span>, <span class="number">0</span>), scene);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> material = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"kosh"</span>, scene);</span><br><span class="line">    <span class="keyword">var</span> sphere = BABYLON.Mesh.CreateSphere(<span class="string">"Sphere"</span>, <span class="number">16</span>, <span class="number">3</span>, scene);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Creating light sphere</span></span><br><span class="line">    <span class="keyword">var</span> lightSphere0 = BABYLON.Mesh.CreateSphere(<span class="string">"Sphere0"</span>, <span class="number">16</span>, <span class="number">0.5</span>, scene);</span><br><span class="line">    <span class="keyword">var</span> lightSphere1 = BABYLON.Mesh.CreateSphere(<span class="string">"Sphere1"</span>, <span class="number">16</span>, <span class="number">0.5</span>, scene);</span><br><span class="line">    <span class="keyword">var</span> lightSphere2 = BABYLON.Mesh.CreateSphere(<span class="string">"Sphere2"</span>, <span class="number">16</span>, <span class="number">0.5</span>, scene);</span><br><span class="line">    <span class="keyword">var</span> lightSphere4 = BABYLON.Mesh.CreateSphere(<span class="string">"Sphere4"</span>, <span class="number">16</span>, <span class="number">0.5</span>, scene);</span><br><span class="line">    <span class="keyword">var</span> lightSphere5 = BABYLON.Mesh.CreateSphere(<span class="string">"Sphere5"</span>, <span class="number">16</span>, <span class="number">0.5</span>, scene);</span><br><span class="line"></span><br><span class="line">    lightSphere0.material = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"red"</span>, scene);</span><br><span class="line">    lightSphere0.material.diffuseColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lightSphere0.material.specularColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lightSphere0.material.emissiveColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    lightSphere1.material = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"green"</span>, scene);</span><br><span class="line">    lightSphere1.material.diffuseColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lightSphere1.material.specularColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lightSphere1.material.emissiveColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    lightSphere2.material = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"blue"</span>, scene);</span><br><span class="line">    lightSphere2.material.diffuseColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lightSphere2.material.specularColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lightSphere2.material.emissiveColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    lightSphere4.material = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"blue"</span>, scene);</span><br><span class="line">    lightSphere4.material.diffuseColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lightSphere4.material.specularColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lightSphere4.material.emissiveColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    lightSphere5.material = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"blue"</span>, scene);</span><br><span class="line">    lightSphere5.material.diffuseColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lightSphere5.material.specularColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    lightSphere5.material.emissiveColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Sphere material</span></span><br><span class="line">    material.diffuseColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    sphere.material = material;</span><br><span class="line">    material.maxSimultaneousLights = <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Lights colors</span></span><br><span class="line">    light0.diffuse = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    light0.specular = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    light1.diffuse = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    light1.specular = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    light2.diffuse = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">    light2.specular = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    light3.diffuse = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    light3.specular = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    light4.diffuse = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    light4.specular = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    light5.diffuse = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    light5.specular = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Animations</span></span><br><span class="line">    <span class="keyword">var</span> alpha = <span class="number">0</span>;</span><br><span class="line">    scene.beforeRender = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        light0.position = <span class="keyword">new</span> BABYLON.Vector3(<span class="number">10</span> * <span class="built_in">Math</span>.sin(alpha), <span class="number">0</span>, <span class="number">10</span> * <span class="built_in">Math</span>.cos(alpha));</span><br><span class="line">        light1.position = <span class="keyword">new</span> BABYLON.Vector3(<span class="number">10</span> * <span class="built_in">Math</span>.sin(alpha), <span class="number">0</span>, <span class="number">-10</span> * <span class="built_in">Math</span>.cos(alpha));</span><br><span class="line">        light2.position = <span class="keyword">new</span> BABYLON.Vector3(<span class="number">10</span> * <span class="built_in">Math</span>.cos(alpha), <span class="number">0</span>, <span class="number">10</span> * <span class="built_in">Math</span>.sin(alpha));</span><br><span class="line">        light4.position = <span class="keyword">new</span> BABYLON.Vector3(<span class="number">10</span> * <span class="built_in">Math</span>.cos(alpha), <span class="number">10</span> * <span class="built_in">Math</span>.sin(alpha), <span class="number">0</span>);</span><br><span class="line">        light5.position = <span class="keyword">new</span> BABYLON.Vector3(<span class="number">10</span> * <span class="built_in">Math</span>.sin(alpha), <span class="number">-10</span> * <span class="built_in">Math</span>.cos(alpha), <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        lightSphere0.position = light0.position;</span><br><span class="line">        lightSphere1.position = light1.position;</span><br><span class="line">        lightSphere2.position = light2.position;</span><br><span class="line">        lightSphere4.position = light4.position;</span><br><span class="line">        lightSphere5.position = light5.position;</span><br><span class="line"></span><br><span class="line">        alpha += <span class="number">0.01</span>;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> scene;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> canvasMaxSimulaneousLights = <span class="built_in">document</span>.getElementById(<span class="string">'renderCanvas-8-maxsimulaneouslights'</span>)</span><br><span class="line"><span class="keyword">const</span> engineMaxSimulaneousLights = <span class="keyword">new</span> BABYLON.Engine(canvasMaxSimulaneousLights,<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">const</span> sceneMaxSimulaneousLights = createSceneMaxSimulaneousLights(engineMaxSimulaneousLights,canvasMaxSimulaneousLights) </span><br><span class="line">engineMaxSimulaneousLights.runRenderLoop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;sceneMaxSimulaneousLights.render()&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<div style="display:flex;flex-direction:column;align-items:center;margin-top:20px;margin-bottom:20px">
    <canvas id="renderCanvas-8-maxsimulaneouslights" touch-action="none" style="width:400px;height:400px">
    </canvas>
</div>

<script>
var createSceneMaxSimulaneousLights = function (engine,canvas) {
    var scene = new BABYLON.Scene(engine);

    // Setup camera
    var camera = new BABYLON.ArcRotateCamera("Camera", 0, 0, 10, BABYLON.Vector3.Zero(), scene);
    camera.setPosition(new BABYLON.Vector3(-10, 10, 0));
    camera.attachControl(canvas, false);

    // Lights
    var light0 = new BABYLON.PointLight("Omni0", new BABYLON.Vector3(0, 10, 0), scene);
    var light1 = new BABYLON.PointLight("Omni1", new BABYLON.Vector3(0, -10, 0), scene);
    var light2 = new BABYLON.PointLight("Omni2", new BABYLON.Vector3(10, 0, 0), scene);
    var light3 = new BABYLON.DirectionalLight("Dir0", new BABYLON.Vector3(1, -1, 0), scene);
    var light4 = new BABYLON.PointLight("Omni3", new BABYLON.Vector3(10, 0, 0), scene);
    var light5 = new BABYLON.PointLight("Omni4", new BABYLON.Vector3(10, 0, 0), scene);

    var material = new BABYLON.StandardMaterial("kosh", scene);
    var sphere = BABYLON.Mesh.CreateSphere("Sphere", 16, 3, scene);

    // Creating light sphere
    var lightSphere0 = BABYLON.Mesh.CreateSphere("Sphere0", 16, 0.5, scene);
    var lightSphere1 = BABYLON.Mesh.CreateSphere("Sphere1", 16, 0.5, scene);
    var lightSphere2 = BABYLON.Mesh.CreateSphere("Sphere2", 16, 0.5, scene);
    var lightSphere4 = BABYLON.Mesh.CreateSphere("Sphere4", 16, 0.5, scene);
    var lightSphere5 = BABYLON.Mesh.CreateSphere("Sphere5", 16, 0.5, scene);

    lightSphere0.material = new BABYLON.StandardMaterial("red", scene);
    lightSphere0.material.diffuseColor = new BABYLON.Color3(0, 0, 0);
    lightSphere0.material.specularColor = new BABYLON.Color3(0, 0, 0);
    lightSphere0.material.emissiveColor = new BABYLON.Color3(1, 0, 0);

    lightSphere1.material = new BABYLON.StandardMaterial("green", scene);
    lightSphere1.material.diffuseColor = new BABYLON.Color3(0, 0, 0);
    lightSphere1.material.specularColor = new BABYLON.Color3(0, 0, 0);
    lightSphere1.material.emissiveColor = new BABYLON.Color3(0, 1, 0);

    lightSphere2.material = new BABYLON.StandardMaterial("blue", scene);
    lightSphere2.material.diffuseColor = new BABYLON.Color3(0, 0, 0);
    lightSphere2.material.specularColor = new BABYLON.Color3(0, 0, 0);
    lightSphere2.material.emissiveColor = new BABYLON.Color3(0, 0, 1);

    lightSphere4.material = new BABYLON.StandardMaterial("blue", scene);
    lightSphere4.material.diffuseColor = new BABYLON.Color3(0, 0, 0);
    lightSphere4.material.specularColor = new BABYLON.Color3(0, 0, 0);
    lightSphere4.material.emissiveColor = new BABYLON.Color3(1, 1, 0);

    lightSphere5.material = new BABYLON.StandardMaterial("blue", scene);
    lightSphere5.material.diffuseColor = new BABYLON.Color3(0, 0, 0);
    lightSphere5.material.specularColor = new BABYLON.Color3(0, 0, 0);
    lightSphere5.material.emissiveColor = new BABYLON.Color3(0, 1, 1);

    // Sphere material
    material.diffuseColor = new BABYLON.Color3(1, 1, 1);
    sphere.material = material;
    material.maxSimultaneousLights = 16;

    // Lights colors
    light0.diffuse = new BABYLON.Color3(1, 0, 0);
    light0.specular = new BABYLON.Color3(1, 0, 0);

    light1.diffuse = new BABYLON.Color3(0, 1, 0);
    light1.specular = new BABYLON.Color3(0, 1, 0);

    light2.diffuse = new BABYLON.Color3(0, 0, 1);
    light2.specular = new BABYLON.Color3(0, 0, 1);

    light3.diffuse = new BABYLON.Color3(1, 1, 1);
    light3.specular = new BABYLON.Color3(1, 1, 1);

    light4.diffuse = new BABYLON.Color3(1, 1, 0);
    light4.specular = new BABYLON.Color3(1, 1, 0);

    light5.diffuse = new BABYLON.Color3(0, 1, 1);
    light5.specular = new BABYLON.Color3(0, 1, 1);

    // Animations
    var alpha = 0;
    scene.beforeRender = function () {
        light0.position = new BABYLON.Vector3(10 * Math.sin(alpha), 0, 10 * Math.cos(alpha));
        light1.position = new BABYLON.Vector3(10 * Math.sin(alpha), 0, -10 * Math.cos(alpha));
        light2.position = new BABYLON.Vector3(10 * Math.cos(alpha), 0, 10 * Math.sin(alpha));
        light4.position = new BABYLON.Vector3(10 * Math.cos(alpha), 10 * Math.sin(alpha), 0);
        light5.position = new BABYLON.Vector3(10 * Math.sin(alpha), -10 * Math.cos(alpha), 0);

        lightSphere0.position = light0.position;
        lightSphere1.position = light1.position;
        lightSphere2.position = light2.position;
        lightSphere4.position = light4.position;
        lightSphere5.position = light5.position;

        alpha += 0.01;
    };

    return scene;
  }
    const canvasMaxSimulaneousLights = document.getElementById('renderCanvas-8-maxsimulaneouslights')
    const engineMaxSimulaneousLights = new BABYLON.Engine(canvasMaxSimulaneousLights,true)
    const sceneMaxSimulaneousLights = createSceneMaxSimulaneousLights(engineMaxSimulaneousLights,canvasMaxSimulaneousLights) 
    engineMaxSimulaneousLights.runRenderLoop(function(){sceneMaxSimulaneousLights.render()})
</script>

<div style="background-color:#F8F8F8;border-left:red 5px solid;padding:30px;margin-bottom:20px"><b>小心! </b>这样做会使BabylonJS产生更大的着色器导致一些低端设备不适用。在这种情况下，BabylonJS会试图恢复到之前的效果。</div>

<p>我们可以使用light的<code>setEnabled</code>方法来开启或关闭光照，例如我们一秒钟切换一下光照开关，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">var</span> createSceneOnOff = <span class="function"><span class="keyword">function</span> (<span class="params">engine,canvas</span>) </span>&#123;</span><br><span class="line">      <span class="comment">// This creates a basic Babylon Scene object (non-mesh)</span></span><br><span class="line">      <span class="keyword">var</span> scene = <span class="keyword">new</span> BABYLON.Scene(engine);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// This creates and positions an ArcRotateCamera;</span></span><br><span class="line">      <span class="keyword">var</span> camera = <span class="keyword">new</span> BABYLON.ArcRotateCamera(<span class="string">"camera"</span>, -<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="number">20</span>,<span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), scene);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> material =<span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"material"</span>,scene)</span><br><span class="line"></span><br><span class="line">      material.diffuseColor=<span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="comment">// This targets the camera to scene origin</span></span><br><span class="line">      camera.setTarget(BABYLON.Vector3.Zero());</span><br><span class="line"></span><br><span class="line">      <span class="comment">// This attaches the camera to the canvas</span></span><br><span class="line">      camera.attachControl(canvas, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">      </span><br><span class="line">      <span class="comment">/**************************************************************/</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> light = <span class="keyword">new</span> BABYLON.HemisphericLight(<span class="string">"light"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">1</span> , <span class="number">0</span>),scene);</span><br><span class="line">      </span><br><span class="line">      setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">          light.setEnabled(!light.isEnabled())</span><br><span class="line"></span><br><span class="line">      &#125;,<span class="number">1000</span>)</span><br><span class="line">      <span class="comment">// Create a sphere which diameter is 8</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">var</span> sphere = BABYLON.MeshBuilder.CreateSphere(<span class="string">"sphere"</span>,&#123;<span class="attr">diameter</span>:<span class="number">8</span>&#125;,scene)</span><br><span class="line"></span><br><span class="line">      sphere.material=material</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> scene;</span><br><span class="line">&#125;</span><br><span class="line">  <span class="keyword">const</span> canvasOnOff = <span class="built_in">document</span>.getElementById(<span class="string">'renderCanvas-8-onoff'</span>)</span><br><span class="line">  <span class="keyword">const</span> engineOnOff = <span class="keyword">new</span> BABYLON.Engine(canvasOnOff,<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">const</span> sceneOnOff = createSceneOnOff(engineOnOff,canvasOnOff) </span><br><span class="line">  engineOnOff.runRenderLoop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;sceneOnOff.render()&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<div style="display:flex;flex-direction:column;align-items:center;margin-top:20px;margin-bottom:20px">
    <canvas id="renderCanvas-8-onoff" touch-action="none" style="width:400px;height:400px">
    </canvas>
</div>

<script>
  var createSceneOnOff = function (engine,canvas) {
        // This creates a basic Babylon Scene object (non-mesh)
        var scene = new BABYLON.Scene(engine);

        // This creates and positions an ArcRotateCamera;
        var camera = new BABYLON.ArcRotateCamera("camera", -Math.PI/2,Math.PI/2,20,new BABYLON.Vector3(0, 0, 0), scene);

        var material =new BABYLON.StandardMaterial("material",scene)

        material.diffuseColor=new BABYLON.Color3(0,1,0)


        // This targets the camera to scene origin
        camera.setTarget(BABYLON.Vector3.Zero());

        // This attaches the camera to the canvas
        camera.attachControl(canvas, false);


        /**************************************************************/

        var light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1 , 0),scene);

        setInterval(()=>{

            light.setEnabled(!light.isEnabled())

        },1000)
        // Create a sphere which diameter is 8

        var sphere = BABYLON.MeshBuilder.CreateSphere("sphere",{diameter:8},scene)

        sphere.material=material

        return scene;
  }
    const canvasOnOff = document.getElementById('renderCanvas-8-onoff')
    const engineOnOff = new BABYLON.Engine(canvasOnOff,true)
    const sceneOnOff = createSceneOnOff(engineOnOff,canvasOnOff) 
    engineOnOff.runRenderLoop(function(){sceneOnOff.render()})
</script>

<p>我们可以使用light的<code>intensity</code>属性来设置光照的强度，（默认1），例如我们从0缓慢增加光强到1，再缓慢减为0，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createSceneIntensity = <span class="function"><span class="keyword">function</span> (<span class="params">engine,canvas</span>) </span>&#123;</span><br><span class="line">   <span class="comment">// This creates a basic Babylon Scene object (non-mesh)</span></span><br><span class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> BABYLON.Scene(engine);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This creates and positions an ArcRotateCamera;</span></span><br><span class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> BABYLON.ArcRotateCamera(<span class="string">"camera"</span>, -<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="number">20</span>,<span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), scene);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> material =<span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"material"</span>,scene)</span><br><span class="line"></span><br><span class="line">    material.diffuseColor=<span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// This targets the camera to scene origin</span></span><br><span class="line">    camera.setTarget(BABYLON.Vector3.Zero());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// This attaches the camera to the canvas</span></span><br><span class="line">    camera.attachControl(canvas, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**************************************************************/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> light = <span class="keyword">new</span> BABYLON.HemisphericLight(<span class="string">"light"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">1</span> , <span class="number">0</span>),scene);</span><br><span class="line"></span><br><span class="line">    light.intensity = <span class="number">0</span>        </span><br><span class="line">    <span class="comment">// Create a sphere which diameter is 8</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> sphere = BABYLON.MeshBuilder.CreateSphere(<span class="string">"sphere"</span>,&#123;<span class="attr">diameter</span>:<span class="number">8</span>&#125;,scene)</span><br><span class="line"></span><br><span class="line">    sphere.material=material;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> dir=<span class="number">0</span></span><br><span class="line">    scene.registerBeforeRender(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!dir)</span><br><span class="line">            light.intensity +=<span class="number">0.005</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            light.intensity -=<span class="number">0.005</span></span><br><span class="line">        <span class="keyword">if</span>(light.intensity&gt;=<span class="number">1</span>) dir=<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(light.intensity&lt;=<span class="number">0</span>) dir=<span class="number">0</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> scene;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> canvasIntensity = <span class="built_in">document</span>.getElementById(<span class="string">'renderCanvas-8-intensity'</span>)</span><br><span class="line"><span class="keyword">const</span> engineIntensity = <span class="keyword">new</span> BABYLON.Engine(canvasIntensity,<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">const</span> sceneIntensity = createSceneIntensity(engineIntensity,canvasIntensity) </span><br><span class="line">engineIntensity.runRenderLoop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;sceneIntensity.render()&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<div style="display:flex;flex-direction:column;align-items:center;margin-top:20px;margin-bottom:20px">
    <canvas id="renderCanvas-8-intensity" touch-action="none" style="width:400px;height:400px">
    </canvas>
</div>

<script>
  var createSceneIntensity = function (engine,canvas) {
        // This creates a basic Babylon Scene object (non-mesh)
        var scene = new BABYLON.Scene(engine);

        // This creates and positions an ArcRotateCamera;
        var camera = new BABYLON.ArcRotateCamera("camera", -Math.PI/2,Math.PI/2,20,new BABYLON.Vector3(0, 0, 0), scene);

        var material =new BABYLON.StandardMaterial("material",scene)

        material.diffuseColor=new BABYLON.Color3(0,1,0)


        // This targets the camera to scene origin
        camera.setTarget(BABYLON.Vector3.Zero());

        // This attaches the camera to the canvas
        camera.attachControl(canvas, false);


        /**************************************************************/

        var light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(0, 1 , 0),scene);

        light.intensity = 0        
        // Create a sphere which diameter is 8


        var sphere = BABYLON.MeshBuilder.CreateSphere("sphere",{diameter:8},scene)

        sphere.material=material;

        let dir=0
        scene.registerBeforeRender(()=>{
            if(!dir)
                light.intensity +=0.005
            else
                light.intensity -=0.005
            if(light.intensity>=1) dir=1
            else if(light.intensity<=0) dir=0
        })


        return scene;
  }
    const canvasIntensity = document.getElementById('renderCanvas-8-intensity')
    const engineIntensity = new BABYLON.Engine(canvasIntensity,true)
    const sceneIntensity = createSceneIntensity(engineIntensity,canvasIntensity) 
    engineIntensity.runRenderLoop(function(){sceneIntensity.render()})
</script>

<p>我们还可以使用light的<code>excludedMeshes</code>方法和<code>includedOnlyMeshes</code>方法来设置该光照只在特定的mesh上显示或不显示。以Babylon提供的代码作为演示，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createSceneExcludeIncludedOnly = <span class="function"><span class="keyword">function</span> (<span class="params">engine,canvas</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> BABYLON.Scene(engine);</span><br><span class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> BABYLON.ArcRotateCamera(<span class="string">"Camera"</span>, -<span class="built_in">Math</span>.PI / <span class="number">2</span>,  <span class="built_in">Math</span>.PI / <span class="number">4</span>, <span class="number">8</span>, BABYLON.Vector3.Zero(), scene);</span><br><span class="line">    camera.attachControl(canvas, <span class="literal">false</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Light direction is up and left</span></span><br><span class="line">    <span class="keyword">var</span> light0 = <span class="keyword">new</span> BABYLON.HemisphericLight(<span class="string">"hemiLight"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>), scene);</span><br><span class="line">    light0.diffuse = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    light0.specular = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    light0.groundColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> light1 = <span class="keyword">new</span> BABYLON.HemisphericLight(<span class="string">"hemiLight"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">-1</span>, <span class="number">1</span>, <span class="number">0</span>), scene);</span><br><span class="line">    light1.diffuse = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    light1.specular = <span class="keyword">new</span> BABYLON.Color3(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">    light1.groundColor = <span class="keyword">new</span> BABYLON.Color3(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> sphere = BABYLON.MeshBuilder.CreateSphere(<span class="string">"sphere"</span>, &#123;<span class="attr">diameter</span>: <span class="number">0.5</span>&#125;, scene);	</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> spheres = [];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">25</span>; i++) &#123;</span><br><span class="line">        spheres[i] = sphere.clone(<span class="string">"sphere"</span> +i);</span><br><span class="line">        spheres[i].position.x = <span class="number">-2</span> + i%<span class="number">5</span>;</span><br><span class="line">        spheres[i].position.y = <span class="number">2</span> - <span class="built_in">Math</span>.floor(i/<span class="number">5</span>);</span><br><span class="line">    &#125;	</span><br><span class="line">    </span><br><span class="line">    light0.excludedMeshes.push(spheres[<span class="number">7</span>], spheres[<span class="number">18</span>]);	</span><br><span class="line">    light1.includedOnlyMeshes.push(spheres[<span class="number">7</span>], spheres[<span class="number">18</span>])	</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">return</span> scene;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> canvasExcludeIncludedOnly = <span class="built_in">document</span>.getElementById(<span class="string">'renderCanvas-8-excludedincludedonly'</span>)</span><br><span class="line"><span class="keyword">const</span> engineExcludeIncludedOnly = <span class="keyword">new</span> BABYLON.Engine(canvasExcludeIncludedOnly,<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">const</span> sceneExcludeIncludedOnly = createSceneExcludeIncludedOnly(engineExcludeIncludedOnly,canvasExcludeIncludedOnly) </span><br><span class="line">engineExcludeIncludedOnly.runRenderLoop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;sceneExcludeIncludedOnly.render()&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<div style="display:flex;flex-direction:column;align-items:center;margin-top:20px;margin-bottom:20px">
    <canvas id="renderCanvas-8-excludedincludedonly" touch-action="none" style="width:400px;height:400px">
    </canvas>
</div>

<script>
  var createSceneExcludedIncludedOnly = function (engine,canvas) {
       var scene = new BABYLON.Scene(engine);
        var camera = new BABYLON.ArcRotateCamera("Camera", -Math.PI / 2,  Math.PI / 4, 8, BABYLON.Vector3.Zero(), scene);
        camera.attachControl(canvas, false);

        //Light direction is up and left
        var light0 = new BABYLON.HemisphericLight("hemiLight", new BABYLON.Vector3(-1, 1, 0), scene);
        light0.diffuse = new BABYLON.Color3(1, 0, 0);
        light0.specular = new BABYLON.Color3(0, 1, 0);
        light0.groundColor = new BABYLON.Color3(0, 1, 0);

        var light1 = new BABYLON.HemisphericLight("hemiLight", new BABYLON.Vector3(-1, 1, 0), scene);
        light1.diffuse = new BABYLON.Color3(1, 1, 1);
        light1.specular = new BABYLON.Color3(1, 1, 1);
        light1.groundColor = new BABYLON.Color3(0, 0, 0);

        var sphere = BABYLON.MeshBuilder.CreateSphere("sphere", {diameter: 0.5}, scene);    

        var spheres = [];
        for(var i = 0; i < 25; i++) {
            spheres[i] = sphere.clone("sphere" +i);
            spheres[i].position.x = -2 + i%5;
            spheres[i].position.y = 2 - Math.floor(i/5);
        }    

        light0.excludedMeshes.push(spheres[7], spheres[18]);    
        light1.includedOnlyMeshes.push(spheres[7], spheres[18])    

        return scene;
    }
    const canvasExcludedIncludedOnly = document.getElementById('renderCanvas-8-excludedincludedonly')
    const engineExcludedIncludedOnly = new BABYLON.Engine(canvasExcludedIncludedOnly,true)
    const sceneExcludedIncludedOnly = createSceneExcludedIncludedOnly(engineExcludedIncludedOnly,canvasExcludedIncludedOnly) 
    engineExcludedIncludedOnly.runRenderLoop(function(){sceneExcludedIncludedOnly.render()})
</script>

<h2 id="法线-Normals"><a href="#法线-Normals" class="headerlink" title="法线 (Normals)"></a>法线 (Normals)</h2><p>一个mesh的其中一面的顶点<code>vertex</code>的法线<code>normal</code>方向决定这个面对光照的表现，当法线指向光源时，光照最强。</p>
<img src="/2019/06/13/Babylon-js-8-光照/normals6.jpg" title="normals6">

<p>如图所示，箭头方向指的是法线方向，我们可以看出，只有法线方向朝着光源（前面）的面被光照射除了颜色，而背离光源（后面）的面没有被光照影响。</p>
<h2 id="光照图-Lightmaps"><a href="#光照图-Lightmaps" class="headerlink" title="光照图 (Lightmaps)"></a>光照图 (Lightmaps)</h2><p>复杂光照会导致计算速度降低，影响性能。这时我们可以使用光照图来存储计算后的光照到一个纹理中：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> lightmap = <span class="keyword">new</span> BABYLON.Texture(<span class="string">"lightmap.png"</span>, scene);</span><br><span class="line"><span class="keyword">var</span> material = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"material"</span>, scene);</span><br><span class="line">material.lightmapTexture = lightmap;</span><br></pre></td></tr></table></figure>

<p>提示：如果使用纹理作为<code>shadowmap</code>替代<code>lightmap</code>，请设置材质的<code>useLightmapAsShadowmap</code>属性为<code>true</code>。</p>
<p>我们设置光源<code>lightmapMode</code>属性，来实现光照与光照图的混合方式。</p>
<ul>
<li>BABYLON.Light.LIGHTMAP_DEFAULT 这会使光照应用到mesh后光照图材质再进行混合</li>
<li>BABYLON.Light.LIGHTMAP_SPECULAR 与BABYLON.Light.LIGHTMAP_DEFAULT相同，除了光照的镜面光和阴影将被应用</li>
<li>BABYLON.Light.LIGHTMAP_SHADOWSONLY 与BABYLON.Light.LIGHTMAP_DEFAULT相同，除了光照的阴影将被应用</li>
</ul>
<p>使用Babylon提供的代码进行演示，首先有一张光照图的纹理图片，如图所示：</p>
<img src="/2019/06/13/Babylon-js-8-光照/candleopacity.png" title="candleopacity">

<p>代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> createSceneLightmap = <span class="function"><span class="keyword">function</span> (<span class="params">engine,canvas</span>) </span>&#123;</span><br><span class="line">         <span class="comment">// Create scene and camera</span></span><br><span class="line">      <span class="keyword">var</span> scene = <span class="keyword">new</span> BABYLON.Scene(engine);</span><br><span class="line">      <span class="keyword">var</span> camera = <span class="keyword">new</span> BABYLON.FreeCamera(<span class="string">"camera1"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>, <span class="number">10</span>, <span class="number">-25</span>), scene);</span><br><span class="line">      camera.setTarget(BABYLON.Vector3.Zero());</span><br><span class="line">      camera.attachControl(canvas, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Create light</span></span><br><span class="line">      <span class="keyword">var</span> light = <span class="keyword">new</span> BABYLON.PointLight(<span class="string">"light"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">3</span>, <span class="number">3</span>, <span class="number">2</span>), scene);</span><br><span class="line">      light.intensity = <span class="number">0.7</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Create lightmap texture on a material</span></span><br><span class="line">      <span class="keyword">var</span> lightmap = <span class="keyword">new</span> BABYLON.Texture(<span class="string">"https://www.babylonjs-playground.com/textures/candleopacity.png"</span>, scene);</span><br><span class="line">      <span class="keyword">var</span> groundMaterial = <span class="keyword">new</span> BABYLON.StandardMaterial(<span class="string">"groundMaterial"</span>, scene);</span><br><span class="line">      groundMaterial.lightmapTexture = lightmap;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Apply lightmap to floor mesh</span></span><br><span class="line">      <span class="keyword">var</span> ground = BABYLON.Mesh.CreateGround(<span class="string">"ground"</span>, <span class="number">20</span>, <span class="number">20</span>, <span class="number">4</span>, scene);</span><br><span class="line">      ground.material = groundMaterial;</span><br><span class="line">      ground.receiveShadows = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Create sphere which will cast shadow on floor mesh</span></span><br><span class="line">      <span class="keyword">var</span> sphere = BABYLON.Mesh.CreateSphere(<span class="string">"sphere1"</span>, <span class="number">16</span>, <span class="number">1</span>, scene);</span><br><span class="line">      sphere.position.z=<span class="number">-1</span></span><br><span class="line">      sphere.position.y=<span class="number">2</span>;</span><br><span class="line">      <span class="keyword">var</span> shadowGenerator = <span class="keyword">new</span> BABYLON.ShadowGenerator(<span class="number">1024</span>, light);</span><br><span class="line">      shadowGenerator.addShadowCaster(sphere)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Move light in the scene</span></span><br><span class="line">      <span class="keyword">var</span> curTime = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">var</span> lastState = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">var</span> lightMapHint = <span class="built_in">document</span>.querySelector(<span class="string">'#lightMapHint'</span>)</span><br><span class="line">      lightMapHint.innerText=<span class="string">'light.lightmapMode = BABYLON.Light.LIGHT_DEFAULT'</span></span><br><span class="line"></span><br><span class="line">      scene.onBeforeRenderObservable.add(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">          curTime+=engine.getDeltaTime();</span><br><span class="line">          light.position.x = <span class="built_in">Math</span>.sin(curTime/<span class="number">1000</span>)*<span class="number">5</span></span><br><span class="line">          <span class="keyword">var</span> t = <span class="built_in">Math</span>.floor(curTime/(<span class="built_in">Math</span>.PI*<span class="number">2</span>*<span class="number">1000</span>))%<span class="number">3</span></span><br><span class="line">          <span class="keyword">if</span>(t!==lastState)&#123;</span><br><span class="line">              <span class="keyword">switch</span>(t)&#123;</span><br><span class="line">                  <span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">                  light.lightmapMode=BABYLON.Light.LIGHTMAP_DEFAULT</span><br><span class="line">                  lightMapHint.innerText=<span class="string">'light.lightmapMode = BABYLON.Light.LIGHTMAP_DEFAULT'</span></span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">                  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                  light.lightmapMode=BABYLON.Light.LIGHTMAP_SPECULAR</span><br><span class="line">                  lightMapHint.innerText=<span class="string">'light.lightmapMode = BABYLON.Light.LIGHTMAP_SPECULAR'</span></span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">                  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                  light.lightmapMode=BABYLON.Light.LIGHTMAP_SHADOWSONLY</span><br><span class="line">                  lightMapHint.innerText=<span class="string">'light.lightmapMode = BABYLON.Light.LIGHTMAP_SHADOWSONLY'</span></span><br><span class="line">                  <span class="keyword">break</span>;</span><br><span class="line">              &#125;</span><br><span class="line">              lastState=t                </span><br><span class="line">          &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="keyword">return</span> scene;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> canvasLightmap = <span class="built_in">document</span>.getElementById(<span class="string">'renderCanvas-8-lightmap'</span>)</span><br><span class="line">  <span class="keyword">const</span> engineLightmap = <span class="keyword">new</span> BABYLON.Engine(canvasLightmap,<span class="literal">true</span>)</span><br><span class="line">  <span class="keyword">const</span> sceneLightmap = createSceneLightmap(engineLightmap,canvasLightmap) </span><br><span class="line">  engineLightmap.runRenderLoop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;sceneLightmap.render()&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<div style="display:flex;flex-direction:column;align-items:center;margin-top:20px;margin-bottom:20px">
    <canvas id="renderCanvas-8-lightmap" touch-action="none" style="width:400px;height:400px">
    </canvas>
</div>
<div id="lightMapHint" style="text-align:center;font-size:20px;padding-bottom:20px;overflow:scroll;">

</div>

<script>
  var createSceneLightmap = function (engine,canvas) {
           // Create scene and camera
        var scene = new BABYLON.Scene(engine);
        var camera = new BABYLON.FreeCamera("camera1", new BABYLON.Vector3(0, 10, -25), scene);
        camera.setTarget(BABYLON.Vector3.Zero());
        camera.attachControl(canvas, false);

        // Create light
        var light = new BABYLON.PointLight("light", new BABYLON.Vector3(3, 3, 2), scene);
        light.intensity = 0.7;

        // Create lightmap texture on a material
        var lightmap = new BABYLON.Texture("https://www.babylonjs-playground.com/textures/candleopacity.png", scene);
        var groundMaterial = new BABYLON.StandardMaterial("groundMaterial", scene);
        groundMaterial.lightmapTexture = lightmap;

        // Apply lightmap to floor mesh
        var ground = BABYLON.Mesh.CreateGround("ground", 20, 20, 4, scene);
        ground.material = groundMaterial;
        ground.receiveShadows = true;

        // Create sphere which will cast shadow on floor mesh
        var sphere = BABYLON.Mesh.CreateSphere("sphere1", 16, 1, scene);
        sphere.position.z=-1
        sphere.position.y=2;
        var shadowGenerator = new BABYLON.ShadowGenerator(1024, light);
        shadowGenerator.addShadowCaster(sphere)

        // Move light in the scene
        var curTime = 0;
        var lastState = 0;
        var lightMapHint = document.querySelector('#lightMapHint')
        lightMapHint.innerText='light.lightmapMode = BABYLON.Light.LIGHT_DEFAULT'

        scene.onBeforeRenderObservable.add(()=>{
            curTime+=engine.getDeltaTime();
            light.position.x = Math.sin(curTime/1000)*5
            var t = Math.floor(curTime/(Math.PI*2*1000))%3
            if(t!==lastState){
                switch(t){
                    case 0:
                    light.lightmapMode=BABYLON.Light.LIGHTMAP_DEFAULT
                    lightMapHint.innerText='light.lightmapMode = BABYLON.Light.LIGHTMAP_DEFAULT'
                    break;
                    case 1:
                    light.lightmapMode=BABYLON.Light.LIGHTMAP_SPECULAR
                    lightMapHint.innerText='light.lightmapMode = BABYLON.Light.LIGHTMAP_SPECULAR'
                    break;
                    case 2:
                    light.lightmapMode=BABYLON.Light.LIGHTMAP_SHADOWSONLY
                    lightMapHint.innerText='light.lightmapMode = BABYLON.Light.LIGHTMAP_SHADOWSONLY'
                    break;
                }
                lastState=t                
            }
        })
        return scene;
    }
    const canvasLightmap = document.getElementById('renderCanvas-8-lightmap')
    const engineLightmap = new BABYLON.Engine(canvasLightmap,true)
    const sceneLightmap = createSceneLightmap(engineLightmap,canvasLightmap) 
    engineLightmap.runRenderLoop(function(){sceneLightmap.render()})
</script>

<h2 id="投影纹理-（Projection-Texture"><a href="#投影纹理-（Projection-Texture" class="headerlink" title="投影纹理 （Projection Texture)"></a>投影纹理 （Projection Texture)</h2><p>这个就像投影仪一样。目前只能使用聚光灯（SpotLight）进行纹理的投影。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> spotLight = <span class="keyword">new</span> BABYLON.SpotLight(<span class="string">"spot02"</span>, <span class="keyword">new</span> BABYLON.Vector3(<span class="number">30</span>, <span class="number">40</span>, <span class="number">30</span>),<span class="keyword">new</span> BABYLON.Vector3(<span class="number">-1</span>, <span class="number">-2</span>, <span class="number">-1</span>), <span class="number">1.1</span>, <span class="number">16</span>, scene);</span><br><span class="line">spotLight.projectionTexture = <span class="keyword">new</span> BABYLON.Texture(<span class="string">"textures/stainedGlass.png"</span>, scene);</span><br></pre></td></tr></table></figure>

<p>我们还可以设置light的以下属性：</p>
<ul>
<li>projectionTextureNear number 投影的近距离，比这个距离近则看不到投影</li>
<li>projectionTextureFar number 投影的远距离，比这个距离远则看不到投影</li>
<li>projectionTextureUpDirection BABYLON.Vector3 定义投影的光空间的对其方向</li>
</ul>
<p>我们使用以下代码来演示投影纹理，代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">var</span> createSceneProjectionTexture = <span class="function"><span class="keyword">function</span> (<span class="params">engine,canvas</span>) </span>&#123;</span><br><span class="line">       <span class="comment">// Create scene and camera</span></span><br><span class="line">    <span class="keyword">var</span> scene = <span class="keyword">new</span> BABYLON.Scene(engine);</span><br><span class="line">    <span class="keyword">var</span> camera = <span class="keyword">new</span> BABYLON.ArcRotateCamera(<span class="string">"camera1"</span>,-<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="built_in">Math</span>.PI/<span class="number">4</span>,<span class="number">35</span>,BABYLON.Vector3.Zero(), scene);</span><br><span class="line">    camera.attachControl(canvas, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Create light </span></span><br><span class="line">    <span class="keyword">var</span> light = <span class="keyword">new</span> BABYLON.SpotLight(<span class="string">"light"</span>,<span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>,<span class="number">30</span>,<span class="number">0</span>),<span class="keyword">new</span> BABYLON.Vector3(<span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>),<span class="built_in">Math</span>.PI/<span class="number">4</span>,<span class="number">5</span>, scene);</span><br><span class="line">    light.intensity = <span class="number">0.7</span>;</span><br><span class="line">    light.projectionTexture = <span class="keyword">new</span> BABYLON.Texture(<span class="string">"https://zzqizqute.github.io/css/images/banner.jpg"</span>,scene);</span><br><span class="line">    <span class="keyword">var</span> dir = <span class="number">0</span></span><br><span class="line">    scene.registerBeforeRender(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!dir)&#123;</span><br><span class="line">            light.position.y+=<span class="number">0.05</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            light.position.y-=<span class="number">0.05</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(light.position.y&gt;=<span class="number">30</span>)dir=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(light.position.y&lt;=<span class="number">10</span>) dir=<span class="number">0</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">var</span> ground = BABYLON.MeshBuilder.CreateGround(<span class="string">"ground"</span>,&#123;<span class="attr">width</span>:<span class="number">20</span>,<span class="attr">height</span>:<span class="number">20</span>&#125;,scene);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> scene;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> canvasProjectionTexture = <span class="built_in">document</span>.getElementById(<span class="string">'renderCanvas-8-projectiontexture'</span>)</span><br><span class="line"><span class="keyword">const</span> engineProjectionTexture = <span class="keyword">new</span> BABYLON.Engine(canvasProjectionTexture,<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">const</span> sceneProjectionTexture = createSceneProjectionTexture(engineProjectionTexture,canvasProjectionTexture) </span><br><span class="line">engineProjectionTexture.runRenderLoop(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;sceneProjectionTexture.render()&#125;)</span><br></pre></td></tr></table></figure>

<p>效果如下：</p>
<div style="display:flex;flex-direction:column;align-items:center;margin-top:20px;margin-bottom:20px">
    <canvas id="renderCanvas-8-projectiontexture" touch-action="none" style="width:400px;height:400px">
    </canvas>
</div>

</div>

<script>
  var createSceneProjectionTexture = function (engine,canvas) {
           // Create scene and camera
        var scene = new BABYLON.Scene(engine);
        var camera = new BABYLON.ArcRotateCamera("camera1",-Math.PI/2,Math.PI/4,35,BABYLON.Vector3.Zero(), scene);
        camera.attachControl(canvas, false);

        // Create light 
        var light = new BABYLON.SpotLight("light",new BABYLON.Vector3(0,30,0),new BABYLON.Vector3(0,-1,0),Math.PI/4,5, scene);
        light.intensity = 0.7;
        light.projectionTexture = new BABYLON.Texture("https://zzqizqute.github.io/css/images/banner.jpg",scene);
        var dir = 0
        scene.registerBeforeRender(()=>{
            if(!dir){
                light.position.y+=0.05;
            }else{
                light.position.y-=0.05;
            }
            if(light.position.y>=30)dir=1;
            else if(light.position.y<=10) dir=0;
        });
        var ground = BABYLON.MeshBuilder.CreateGround("ground",{width:20,height:20},scene);

        return scene;
    }
    const canvasProjectionTexture = document.getElementById('renderCanvas-8-projectiontexture')
    const engineProjectionTexture = new BABYLON.Engine(canvasProjectionTexture,true)
    const sceneProjectionTexture = createSceneProjectionTexture(engineProjectionTexture,canvasProjectionTexture) 
    engineProjectionTexture.runRenderLoop(function(){sceneProjectionTexture.render()})
</script>
</div></div></div>
      
    </div>
    <!-- <footer class="article-footer">
      <a data-url="https://github.com/ZzqiZQute/2019/06/13/Babylon-js-8-光照/" data-id="ckxyvlkju000cx8u7vcy37fii" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BabylonJS/">BabylonJS</a></li></ul>

    </footer> -->
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><a class="extend next" rel="next" href="/page/5/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Algorithms/">Algorithms</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BabylonJS/">BabylonJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blender/">Blender</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/babel/">babel</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chore/">chore</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/06/19/关于使用Vue-js的通知/">关于使用Vue.js的通知（误）</a>
          </li>
        
          <li>
            <a href="/2019/06/18/三边测量（Trilateration）定位方法/">三边测量（Trilateration）定位方法</a>
          </li>
        
          <li>
            <a href="/2019/06/15/Babylon-js-9-动画/">Babylon.js-9 动画</a>
          </li>
        
          <li>
            <a href="/2019/06/13/Babylon-js-8-光照/">Babylon.js-8 光照</a>
          </li>
        
          <li>
            <a href="/2019/06/12/配置Babel以便使用es6编写Node代码/">配置Babel以便使用es6编写Node代码</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 ZzqiZQute<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
     <br>
     <br>
    <div>我猜你已经发现了页面的彩蛋，对吗？</div>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
</nav>
    
<script src="https://cdn.bootcss.com/babylonjs/4.1.0-alpha.1/babylon.js"></script>
<script src="https://preview.babylonjs.com/loaders/babylonjs.loaders.min.js"></script> <!-- babylon.js加载器 (OBJ, STL, glTF)-->
<script src="https://code.jquery.com/pep/0.4.3/pep.js"></script> <!-- Pointer Event Polyfill 便携设备触碰事件处理 -->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>